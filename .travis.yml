language: ruby
cache: bundler
rvm:
  - 1.9.3
env:
  - DATABASE_URL=sqlite3:db/test.sqlite3
before_install:
  - gem update --system
  - gem --version
  - gem install sqlite3
  - gem install bundler
  - bundle version
  - bundle update debugger
  - bundle update sqlite3
before_script:
  - echo $DATABASE_URL
  - cp config/application.yml.example config/application.yml
  - cp config/epic.yml.example config/epic.yml
  - cp config/ldap.yml.example config/ldap.yml
script:
  - bundle exec rake db:test:load
  - bundle exec rspec spec/mailers
  - bundle exec rspec spec/models
  - bundle exec rspec spec/controllers