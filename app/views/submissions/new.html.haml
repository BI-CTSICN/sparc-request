.panel.panel-primary
  .panel-heading
    Questionnaire Submission
  .panel-body
    = form_for [@service, @submission] do |f|
      = f.hidden_field :identity_id, value: current_identity.id
      = f.hidden_field :service_id, value: @service.id
      - @questionnaire.items.each do |item|
        = f.fields_for :questionnaire_responses do |qr|
          = qr.hidden_field :item_id, value: item.id
          .form-group
            = qr.label item.content
            - if item.item_type == 'textarea'
              = qr.text_area :content, class: 'form-control'
            - if item.item_type == 'radio_button'
              %br
              - item.item_options.each do |item_option|
                = qr.label :content, class: 'radio-inline' do
                  = qr.radio_button :content, item_option.content
                  = item_option.content
            - if item.item_type == 'checkbox'
              %br
              - item.item_options.each do |item_option|
                = qr.label :content, class: 'checkbox-inline' do
                  = qr.check_box :content, {}, item_option.content, nil
                  = item_option.content
            - if item.item_type == 'yes_no'
              %br
              = qr.label :content, class: 'radio-inline' do
                = qr.radio_button :content, 'yes'
                Yes
              = qr.label :content, class: 'radio-inline' do
                = qr.radio_button :content, 'no'
                No
            - if item.item_type == 'date'
              %div{ class: 'input-group date', id: 'datetimepicker' }
                %input{ type: 'text', class: 'form-control' }
                %span.input-group-addon
                  %span.glyphicon.glyphicon-calendar
            - if item.item_type == 'dropdown'
              = qr.select :content, options_for_select(item.item_options.collect { |io| [ io.content, io.id ] } ), {}, { class: 'form-control' }
            - if item.item_type == 'multiple_dropdown'
              = qr.select :content, options_for_select(item.item_options.collect { |io| [ io.content, io.id ] } ), {}, { class: 'form-control selectpicker', multiple: true }
            - if item.item_type == 'text' &&
              = qr.text_field :content, class: 'form-control'
            - if item.item_type == 'email'
              = qr.email_field :content, class: 'form-control'
            - if item.item_type == 'number' || item.item_type == 'zipcode'
              = qr.number_field :content, class: 'form-control'
            - if item.item_type == 'phone'
              = qr.telephone_field :content, class: 'form-control'
            - if item.item_type == 'country'
              = qr.country_select :content,
                { priority_countries: ['US'], include_blank: true },
                { class: 'form-control' }
            - if item.item_type == 'state'
              = qr.select :content, options_for_select(us_states), {},
                { class: 'form-control' }
            - if item.item_type == 'time'
              = qr.time_field :content, class: 'form-control'
      .form-group
        .col-sm-offset-10.col-sm-2
          = f.submit class: 'btn btn-success'
