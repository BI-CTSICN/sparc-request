/////////////////////////////////////////////
//
// PROJECT - Fields for New/Editing Projects
//
/////////////////////////////////////////////

= javascript_include_tag 'projects'

.description= t(:project_form)[:message]

.grid_7.box
  .info
    .field
      = f.label :short_title, t(:protocol_shared)[:title]
      = f.text_field :short_title

    .field
      = f.label :title, t(:project_form)[:title]
      = f.text_field :title
      
    .field
      = f.label :funding_status, t(:protocol_shared)[:funding_status]
      = f.select :funding_status, options_for_select(FUNDING_STATUSES, @protocol.funding_status), :include_blank => t(:project_form)[:dropdown_default1]

    #funded
      .field
        = f.label :funding_source, t(:protocol_shared)[:funding_source]
        = f.select :funding_source, options_for_select(FUNDING_SOURCES, @protocol.funding_source), :include_blank => t(:project_form)[:dropdown_default2]

    #pending_funding 
      .field
        = f.label :potential_funding_source, t(:protocol_shared)[:potential_funding_source]
        = f.select :potential_funding_source, options_for_select(POTENTIAL_FUNDING_SOURCES, @protocol.potential_funding_source), :include_blank => t(:project_form)[:dropdown_default3]

    .field
      = f.label :brief_description, t(:project_form)[:description]
      = f.text_area :brief_description

    .indirect_cost_rate
      = f.label :indirect_cost_rate, t(:project_form)[:rate]
      = f.text_field :indirect_cost_rate

.grid_5.box= render :partial => 'shared/user_search'

- hide_user_details = (@protocol.new_record? and @protocol.project_roles.empty?) ? '' : 'display:none;'

.grid_5.box.user_added_message{:style => 'display:none;'}
  %p
    - t(:protocol_shared)[:add_user]

.grid_5.box.user-details.user-manager-view.add-user-details{:style => "#{hide_user_details}"}= render :partial => 'shared/user_details', :locals => {:identity => current_user, :project_role => ProjectRole.new, :can_edit => true}

.grid_12= render :partial => 'shared/user_list', :locals => {:protocol => @protocol}
