%table.service_calendar
  %thead.ui-widget-header
    %tr.table_header
      %th.services{:rowspan => 2}= t(:ssr_dialog)[:calendar][:headers][:services]
      %th.your_cost{:rowspan => 2}= t(:ssr_dialog)[:calendar][:headers][:cost]
      %th.visits_header{:colspan => 6, :rowspan => 2, :height => 40, :width => 375}
      %th.total{:rowspan => 2}= t(:ssr_dialog)[:calendar][:headers][:total]

  %tbody.cell-border
    %tr.section_header
      %th{:colspan => 12}= t("calendar_page.headers.other_services")
    %tr.section_header
    - @service_request.service_list(true).each do |key, value| # get only one time fee services and group them
      %tr.sub_section_header
        %th{:colspan => 9}= value[:name]
        - value[:line_items].each do |line_item|
          %tr.line_item
            %td.service_name= line_item.service.name
            %td.your_cost= display_your_cost line_item
            %td{:colspan => 6}
            %td= display_one_time_fee_direct_cost line_item

  %tr.section_header
    %tr.totals_section
      %td{:colspan => 6}
      %td.dark_gray_bg.totals{:colspan => 2}= t(:ssr_dialog)[:calendar][:totals][:direct_cost]
      %td.dark_gray_bg.totals{:id => 'grand_total_direct'}= display_grand_total_direct_costs @service_request, @service_request.line_items

    - if USE_INDIRECT_COST
      %tr.totals_section
        %td{:colspan => 6}
        %td.dark_gray_bg.totals{:colspan => 2}= t(:ssr_dialog)[:calendar][:totals][:indirect_cost]
        %td.dark_gray_bg.totals{:id => 'grand_total_indirect'}= display_grand_total_indirect_costs @service_request, @service_request.line_items

    %tr.totals_section
      %td{:colspan => 6}
      %td.dark_gray_bg.totals{:colspan => 2}= t(:ssr_dialog)[:calendar][:totals][:grand]
      %td.dark_gray_bg.totals{:id => 'grand_total'}= display_grand_total @service_request, @service_request.line_items
