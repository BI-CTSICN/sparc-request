- unless @service.errors.messages.empty?
  - @service_errors = @service.errors.to_json
  :plain
    $('#flash').hide();
    $('#flash').html("There were errors saving #{escape_javascript(@service.name)}.");
    Sparc.catalog.handle_ajax_errors("#{escape_javascript(@service_errors)}", "Service")

- else
  :plain
    Sparc.catalog.clear_error_fields()

    $('#details').html('#{escape_javascript(render :partial => 'form')}');
    $('#catalog').jstree('create_node', 
      $("##{@service.organization.class.to_s.upcase}#{@service.organization.id}"), 
      "last", 
      { attr: { 
        id: "SERVICE#{@service.id}"}, 
        data: {
          attr: {
            cid: "#{@service.id}",
            class: "service",
            object_type: "service",
          },
          title: "#{@service.name}"
        }
      }, 
      function(){}, 
      true
    );
    $("#SERVICE#{@service.id} a").click()

    /* display the success message */
    $('#flash').hide();
    $('#flash').html("#{escape_javascript(@service.name)} created successfully");

:plain
  $('#flash').slideDown();
  $('#flash').delay(3000);
  $('#flash').slideUp();
  $('.spinner').hide();
  setInterval(function(){$('.save_button').removeAttr('disabled');},1000);









